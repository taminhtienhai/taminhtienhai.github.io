import{an as U,j,o as p,y as F,ao as G,U as D,T,W as E,V as P,k as v,a3 as L,p as S,ap as q,aq as A,ar as C,c as V,D as b,F as x,as as W}from"./pZ4bjZez.js";const I=0,m=1,N=2;function z(l,i,r,c,t){p&&F();var s=l,k=U(),H=V,a=D,n,o,f,d=(k?E:P)(void 0),y=(k?E:P)(void 0),h=!1;function _(e,u){h=!0,u&&(q(w),A(w),C(H));try{e===I&&r&&(n?b(n):n=v(()=>r(s))),e===m&&c&&(o?b(o):o=v(()=>c(s,d))),e===N&&t&&(f?b(f):f=v(()=>t(s,y))),e!==I&&n&&x(n,()=>n=null),e!==m&&o&&x(o,()=>o=null),e!==N&&f&&x(f,()=>f=null)}finally{u&&(C(null),A(null),q(null),W())}}var w=j(()=>{if(a!==(a=i())){if(G(a)){var e=a;h=!1,e.then(u=>{e===a&&(T(d,u),_(m,!0))},u=>{if(e===a&&(T(y,u),_(N,!0),!t))throw y.v}),p?r&&(n=v(()=>r(s))):L(()=>{h||_(I,!0)})}else T(d,a),_(m,!1);return()=>a=D}});p&&(s=S)}const B=l=>{let i;return r=>new Promise((c,t)=>{clearTimeout(i),i=setTimeout(()=>{try{c(r())}catch(s){t(s)}},l)})},J=(l,i=1e3)=>new Promise((r,c)=>{setTimeout(()=>{try{r(l())}catch(t){c(t)}},i)});export{z as a,J as b,B as d};
