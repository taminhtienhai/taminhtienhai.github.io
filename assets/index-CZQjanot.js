(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function ze(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function qe(){const e=ze();if(e.__xstate__)return e.__xstate__}const Ge=e=>{if(typeof window>"u")return;const t=qe();t&&t.register(e)};class Ut{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const n={value:t,next:null};if(this._current){this._last.next=n,this._last=n;return}this._current=n,this._last=n,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const ae=".",Xe="",ue="",Ye="#",Ze="*",de="xstate.init",Ke="xstate.error",rt="xstate.stop";function Ve(e,t){return{type:`xstate.after.${e}.${t}`}}function At(e,t){return{type:`xstate.done.state.${e}`,output:t}}function Fe(e,t){return{type:`xstate.done.actor.${e}`,output:t,actorId:e}}function he(e,t){return{type:`xstate.error.actor.${e}`,error:t,actorId:e}}function le(e){return{type:de,input:e}}function v(e){setTimeout(()=>{throw e})}const Qe=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fe(e,t){const n=Nt(e),s=Nt(t);return typeof s=="string"?typeof n=="string"?s===n:!1:typeof n=="string"?n in s:Object.keys(n).every(i=>i in s?fe(n[i],s[i]):!1)}function Et(e){if(ye(e))return e;const t=[];let n="";for(let s=0;s<e.length;s++){switch(e.charCodeAt(s)){case 92:n+=e[s+1],s++;continue;case 46:t.push(n),n="";continue}n+=e[s]}return t.push(n),t}function Nt(e){if(jn(e))return e.value;if(typeof e!="string")return e;const t=Et(e);return tn(t)}function tn(e){if(e.length===1)return e[0];const t={};let n=t;for(let s=0;s<e.length-1;s++)if(s===e.length-2)n[e[s]]=e[s+1];else{const i=n;n={},i[e[s]]=n}return t}function Jt(e,t){const n={},s=Object.keys(e);for(let i=0;i<s.length;i++){const r=s[i];n[r]=t(e[r],r,e,i)}return n}function pe(e){return ye(e)?e:[e]}function A(e){return e===void 0?[]:pe(e)}function bt(e,t,n,s){return typeof e=="function"?e({context:t,event:n,self:s}):e}function ye(e){return Array.isArray(e)}function en(e){return e.type.startsWith("xstate.error.actor")}function D(e){return pe(e).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function ge(e){if(!(e===void 0||e===Xe))return A(e)}function St(e,t,n){var r,o,c;const s=typeof e=="object",i=s?e:void 0;return{next:(r=s?e.next:e)==null?void 0:r.bind(i),error:(o=s?e.error:t)==null?void 0:o.bind(i),complete:(c=s?e.complete:n)==null?void 0:c.bind(i)}}function Wt(e,t){return`${t}.${e}`}function It(e,t){const n=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return e.implementations.actors[t];const[,s,i]=n,o=e.getStateNodeById(i).config.invoke;return(Array.isArray(o)?o[s]:o).src}function zt(e,t){return`${e.sessionId}.${t}`}let nn=0;function sn(e,t){const n=new Map,s=new Map,i=new WeakMap,r=new Set,o={},{clock:c,logger:a}=t,h={schedule:(d,l,p,y,_=Math.random().toString(36).slice(2))=>{const j={source:d,target:l,event:p,delay:y,id:_,startedAt:Date.now()},R=zt(d,_);u._snapshot._scheduledEvents[R]=j;const We=c.setTimeout(()=>{delete o[R],delete u._snapshot._scheduledEvents[R],u._relay(d,l,p)},y);o[R]=We},cancel:(d,l)=>{const p=zt(d,l),y=o[p];delete o[p],delete u._snapshot._scheduledEvents[p],y!==void 0&&c.clearTimeout(y)},cancelAll:d=>{for(const l in u._snapshot._scheduledEvents){const p=u._snapshot._scheduledEvents[l];p.source===d&&h.cancel(d,p.id)}}},f=d=>{if(!r.size)return;const l={...d,rootId:e.sessionId};r.forEach(p=>{var y;return(y=p.next)==null?void 0:y.call(p,l)})},u={_snapshot:{_scheduledEvents:((t==null?void 0:t.snapshot)&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${nn++}`,_register:(d,l)=>(n.set(d,l),d),_unregister:d=>{n.delete(d.sessionId);const l=i.get(d);l!==void 0&&(s.delete(l),i.delete(d))},get:d=>s.get(d),_set:(d,l)=>{const p=s.get(d);if(p&&p!==l)throw new Error(`Actor with system ID '${d}' already exists.`);s.set(d,l),i.set(l,d)},inspect:d=>{const l=St(d);return r.add(l),{unsubscribe(){r.delete(l)}}},_sendInspectionEvent:f,_relay:(d,l,p)=>{u._sendInspectionEvent({type:"@xstate.event",sourceRef:d,actorRef:l,event:p}),l._send(p)},scheduler:h,getSnapshot:()=>({_scheduledEvents:{...u._snapshot._scheduledEvents}}),start:()=>{const d=u._snapshot._scheduledEvents;u._snapshot._scheduledEvents={};for(const l in d){const{source:p,target:y,event:_,delay:j,id:R}=d[l];h.schedule(p,y,_,j,R)}},_clock:c,_logger:a};return u}let lt=!1;const kt=1;let m=function(e){return e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped",e}({});const rn={clock:{setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},logger:console.log.bind(console),devTools:!1};class on{constructor(t,n){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new Ut(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=m.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...rn,...n},{clock:i,logger:r,parent:o,syncSnapshot:c,id:a,systemId:h,inspect:f}=s;this.system=o?o.system:sn(this,{clock:i,logger:r}),f&&!o&&this.system.inspect(St(f)),this.sessionId=this.system._bookId(),this.id=a??this.sessionId,this.logger=(n==null?void 0:n.logger)??this.system._logger,this.clock=(n==null?void 0:n.clock)??this.system._clock,this._parent=o,this._syncSnapshot=c,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:u=>{this._deferred.push(u)},system:this.system,stopChild:u=>{if(u._parent!==this)throw new Error(`Cannot stop child actor ${u.id} of ${this.id} because it is not a child`);u._stop()},emit:u=>{const d=this.eventListeners.get(u.type),l=this.eventListeners.get("*");if(!d&&!l)return;const p=[...d?d.values():[],...l?l.values():[]];for(const y of p)y(u)},actionExecutor:u=>{const d=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:u.type,params:u.params}}),!u.exec)return;const l=lt;try{lt=!0,u.exec(u.info,u.params)}finally{lt=l}};this._processingStatus===m.Running?d():this._deferred.push(d)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),h&&(this._systemId=h,this.system._set(h,this)),this._initState((n==null?void 0:n.snapshot)??(n==null?void 0:n.state)),h&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){var n;try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,(n=this.options)==null?void 0:n.input)}catch(s){this._snapshot={status:"error",output:void 0,error:s}}}update(t,n){var i,r;this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(o){this._deferred.length=0,this._snapshot={...t,status:"error",error:o}}switch(this._snapshot.status){case"active":for(const o of this.observers)try{(i=o.next)==null||i.call(o,t)}catch(c){v(c)}break;case"done":for(const o of this.observers)try{(r=o.next)==null||r.call(o,t)}catch(c){v(c)}this._stopProcedure(),this._complete(),this._doneEvent=Fe(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:n,snapshot:t})}subscribe(t,n,s){var r;const i=St(t,n,s);if(this._processingStatus!==m.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{(r=i.complete)==null||r.call(i)}catch(o){v(o)}break;case"error":{const o=this._snapshot.error;if(!i.error)v(o);else try{i.error(o)}catch(c){v(c)}break}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(t,n){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const i=n.bind(void 0);return s.add(i),{unsubscribe:()=>{s.delete(i)}}}start(){if(this._processingStatus===m.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=m.Running;const t=le(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let n,s;try{n=this.logic.transition(this._snapshot,t,this._actorScope)}catch(i){s={err:i}}if(s){const{err:i}=s;this._snapshot={...this._snapshot,status:"error",error:i},this._error(i);return}this.update(n,t),t.type===rt&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===m.Stopped?this:(this.mailbox.clear(),this._processingStatus===m.NotStarted?(this._processingStatus=m.Stopped,this):(this.mailbox.enqueue({type:rt}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){var t;for(const n of this.observers)try{(t=n.complete)==null||t.call(n)}catch(s){v(s)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||v(t);return}let n=!1;for(const s of this.observers){const i=s.error;n||(n=!i);try{i==null||i(t)}catch(r){v(r)}}this.observers.clear(),n&&v(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,he(this.id,t))}_stopProcedure(){return this._processingStatus!==m.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new Ut(this._process.bind(this)),this._processingStatus=m.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==m.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:Ge)(this)}toJSON(){return{xstate$$type:kt,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[Qe](){return this}getSnapshot(){return this._snapshot}}function Y(e,...[t]){return new on(e,t)}function cn(e,t,n,s,{sendId:i}){const r=typeof i=="function"?i(n,s):i;return[t,{sendId:r},void 0]}function an(e,t){e.defer(()=>{e.system.scheduler.cancel(e.self,t.sendId)})}function un(e){function t(n,s){}return t.type="xstate.cancel",t.sendId=e,t.resolve=cn,t.execute=an,t}function dn(e,t,n,s,{id:i,systemId:r,src:o,input:c,syncSnapshot:a}){const h=typeof o=="string"?It(t.machine,o):o,f=typeof i=="function"?i(n):i;let u,d;return h&&(d=typeof c=="function"?c({context:t.context,event:n.event,self:e.self}):c,u=Y(h,{id:f,src:o,parent:e.self,syncSnapshot:a,systemId:r,input:d})),[M(t,{children:{...t.children,[f]:u}}),{id:i,systemId:r,actorRef:u,src:o,input:d},void 0]}function hn(e,{actorRef:t}){t&&e.defer(()=>{t._processingStatus!==m.Stopped&&t.start()})}function ln(...[e,{id:t,systemId:n,input:s,syncSnapshot:i=!1}={}]){function r(o,c){}return r.type="xstate.spawnChild",r.id=t,r.systemId=n,r.src=e,r.input=s,r.syncSnapshot=i,r.resolve=dn,r.execute=hn,r}function fn(e,t,n,s,{actorRef:i}){const r=typeof i=="function"?i(n,s):i,o=typeof r=="string"?t.children[r]:r;let c=t.children;return o&&(c={...c},delete c[o.id]),[M(t,{children:c}),o,void 0]}function pn(e,t){if(t){if(e.system._unregister(t),t._processingStatus!==m.Running){e.stopChild(t);return}e.defer(()=>{e.stopChild(t)})}}function _e(e){function t(n,s){}return t.type="xstate.stopChild",t.actorRef=e,t.resolve=fn,t.execute=pn,t}function Mt(e,t,n,s){const{machine:i}=s,r=typeof e=="function",o=r?e:i.implementations.guards[typeof e=="string"?e:e.type];if(!r&&!o)throw new Error(`Guard '${typeof e=="string"?e:e.type}' is not implemented.'.`);if(typeof o!="function")return Mt(o,t,n,s);const c={context:t,event:n},a=r||typeof e=="string"?void 0:"params"in e?typeof e.params=="function"?e.params({context:t,event:n}):e.params:void 0;return"check"in o?o.check(s,c,o):o(c,a)}const Ot=e=>e.type==="atomic"||e.type==="final";function U(e){return Object.values(e.states).filter(t=>t.type!=="history")}function F(e,t){const n=[];if(t===e)return n;let s=e.parent;for(;s&&s!==t;)n.push(s),s=s.parent;return n}function ot(e){const t=new Set(e),n=ve(t);for(const s of t)if(s.type==="compound"&&(!n.get(s)||!n.get(s).length))qt(s).forEach(i=>t.add(i));else if(s.type==="parallel"){for(const i of U(s))if(i.type!=="history"&&!t.has(i)){const r=qt(i);for(const o of r)t.add(o)}}for(const s of t){let i=s.parent;for(;i;)t.add(i),i=i.parent}return t}function me(e,t){const n=t.get(e);if(!n)return{};if(e.type==="compound"){const i=n[0];if(i){if(Ot(i))return i.key}else return{}}const s={};for(const i of n)s[i.key]=me(i,t);return s}function ve(e){const t=new Map;for(const n of e)t.has(n)||t.set(n,[]),n.parent&&(t.has(n.parent)||t.set(n.parent,[]),t.get(n.parent).push(n));return t}function $e(e,t){const n=ot(t);return me(e,ve(n))}function Ct(e,t){return t.type==="compound"?U(t).some(n=>n.type==="final"&&e.has(n)):t.type==="parallel"?U(t).every(n=>Ct(e,n)):t.type==="final"}const dt=e=>e[0]===Ye;function yn(e,t){return e.transitions.get(t)||[...e.transitions.keys()].filter(s=>{if(s===Ze)return!0;if(!s.endsWith(".*"))return!1;const i=s.split("."),r=t.split(".");for(let o=0;o<i.length;o++){const c=i[o],a=r[o];if(c==="*")return o===i.length-1;if(c!==a)return!1}return!0}).sort((s,i)=>i.length-s.length).flatMap(s=>e.transitions.get(s))}function gn(e){const t=e.config.after;if(!t)return[];const n=i=>{const r=Ve(i,e.id),o=r.type;return e.entry.push(Wn(r,{id:o,delay:i})),e.exit.push(un(o)),o};return Object.keys(t).flatMap(i=>{const r=t[i],o=typeof r=="string"?{target:r}:r,c=Number.isNaN(+i)?i:+i,a=n(c);return A(o).map(h=>({...h,event:a,delay:c}))}).map(i=>{const{delay:r}=i;return{...T(e,i.event,i),delay:r}})}function T(e,t,n){const s=ge(n.target),i=n.reenter??!1,r=vn(e,s),o={...n,actions:A(n.actions),guard:n.guard,target:r,source:e,reenter:i,eventType:t,toJSON:()=>({...o,source:`#${e.id}`,target:r?r.map(c=>`#${c.id}`):void 0})};return o}function _n(e){const t=new Map;if(e.config.on)for(const n of Object.keys(e.config.on)){if(n===ue)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=e.config.on[n];t.set(n,D(s).map(i=>T(e,n,i)))}if(e.config.onDone){const n=`xstate.done.state.${e.id}`;t.set(n,D(e.config.onDone).map(s=>T(e,n,s)))}for(const n of e.invoke){if(n.onDone){const s=`xstate.done.actor.${n.id}`;t.set(s,D(n.onDone).map(i=>T(e,s,i)))}if(n.onError){const s=`xstate.error.actor.${n.id}`;t.set(s,D(n.onError).map(i=>T(e,s,i)))}if(n.onSnapshot){const s=`xstate.snapshot.${n.id}`;t.set(s,D(n.onSnapshot).map(i=>T(e,s,i)))}}for(const n of e.after){let s=t.get(n.eventType);s||(s=[],t.set(n.eventType,s)),s.push(n)}return t}function mn(e,t){const n=typeof t=="string"?e.states[t]:t?e.states[t.target]:void 0;if(!n&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${e.id}`);const s={source:e,actions:!t||typeof t=="string"?[]:A(t.actions),eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...s,source:`#${e.id}`,target:n?[`#${n.id}`]:[]})};return s}function vn(e,t){if(t!==void 0)return t.map(n=>{if(typeof n!="string")return n;if(dt(n))return e.machine.getStateNodeById(n);const s=n[0]===ae;if(s&&!e.parent)return ct(e,n.slice(1));const i=s?e.key+n:n;if(e.parent)try{return ct(e.parent,i)}catch(r){throw new Error(`Invalid transition definition for state node '${e.id}':
${r.message}`)}else throw new Error(`Invalid target: "${n}" is not a valid target from the root node. Did you mean ".${n}"?`)})}function Ae(e){const t=ge(e.config.target);return t?{target:t.map(n=>typeof n=="string"?ct(e.parent,n):n)}:e.parent.initial}function E(e){return e.type==="history"}function qt(e){const t=be(e);for(const n of t)for(const s of F(n,e))t.add(s);return t}function be(e){const t=new Set;function n(s){if(!t.has(s)){if(t.add(s),s.type==="compound")n(s.initial.target[0]);else if(s.type==="parallel")for(const i of U(s))n(i)}}return n(e),t}function N(e,t){if(dt(t))return e.machine.getStateNodeById(t);if(!e.states)throw new Error(`Unable to retrieve child state '${t}' from '${e.id}'; no child states exist.`);const n=e.states[t];if(!n)throw new Error(`Child state '${t}' does not exist on '${e.id}'`);return n}function ct(e,t){if(typeof t=="string"&&dt(t))try{return e.machine.getStateNodeById(t)}catch{}const n=Et(t).slice();let s=e;for(;n.length;){const i=n.shift();if(!i.length)break;s=N(s,i)}return s}function at(e,t){if(typeof t=="string"){const i=e.states[t];if(!i)throw new Error(`State '${t}' does not exist on '${e.id}'`);return[e,i]}const n=Object.keys(t),s=n.map(i=>N(e,i)).filter(Boolean);return[e.machine.root,e].concat(s,n.reduce((i,r)=>{const o=N(e,r);if(!o)return i;const c=at(o,t[r]);return i.concat(c)},[]))}function $n(e,t,n,s){const r=N(e,t).next(n,s);return!r||!r.length?e.next(n,s):r}function An(e,t,n,s){const i=Object.keys(t),r=N(e,i[0]),o=Lt(r,t[i[0]],n,s);return!o||!o.length?e.next(n,s):o}function bn(e,t,n,s){const i=[];for(const r of Object.keys(t)){const o=t[r];if(!o)continue;const c=N(e,r),a=Lt(c,o,n,s);a&&i.push(...a)}return i.length?i:e.next(n,s)}function Lt(e,t,n,s){return typeof t=="string"?$n(e,t,n,s):Object.keys(t).length===1?An(e,t,n,s):bn(e,t,n,s)}function Sn(e){return Object.keys(e.states).map(t=>e.states[t]).filter(t=>t.type==="history")}function S(e,t){let n=e;for(;n.parent&&n.parent!==t;)n=n.parent;return n.parent===t}function xn(e,t){const n=new Set(e),s=new Set(t);for(const i of n)if(s.has(i))return!0;for(const i of s)if(n.has(i))return!0;return!1}function Se(e,t,n){const s=new Set;for(const i of e){let r=!1;const o=new Set;for(const c of s)if(xn(xt([i],t,n),xt([c],t,n)))if(S(i.source,c.source))o.add(c);else{r=!0;break}if(!r){for(const c of o)s.delete(c);s.add(i)}}return Array.from(s)}function wn(e){const[t,...n]=e;for(const s of F(t,void 0))if(n.every(i=>S(i,s)))return s}function jt(e,t){if(!e.target)return[];const n=new Set;for(const s of e.target)if(E(s))if(t[s.id])for(const i of t[s.id])n.add(i);else for(const i of jt(Ae(s),t))n.add(i);else n.add(s);return[...n]}function xe(e,t){const n=jt(e,t);if(!n)return;if(!e.reenter&&n.every(i=>i===e.source||S(i,e.source)))return e.source;const s=wn(n.concat(e.source));if(s)return s;if(!e.reenter)return e.source.machine.root}function xt(e,t,n){var i;const s=new Set;for(const r of e)if((i=r.target)!=null&&i.length){const o=xe(r,n);r.reenter&&r.source===o&&s.add(o);for(const c of t)S(c,o)&&s.add(c)}return[...s]}function Tn(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wt(e,t,n,s,i,r){if(!e.length)return t;const o=new Set(t._nodes);let c=t.historyValue;const a=Se(e,o,c);let h=t;i||([h,c]=Mn(h,s,n,a,o,c,r,n.actionExecutor)),h=J(h,s,n,a.flatMap(u=>u.actions),r,void 0),h=In(h,s,n,a,o,r,c,i);const f=[...o];h.status==="done"&&(h=J(h,s,n,f.sort((u,d)=>d.order-u.order).flatMap(u=>u.exit),r,void 0));try{return c===t.historyValue&&Tn(t._nodes,o)?h:M(h,{_nodes:f,historyValue:c})}catch(u){throw u}}function En(e,t,n,s,i){if(s.output===void 0)return;const r=At(i.id,i.output!==void 0&&i.parent?bt(i.output,e.context,t,n.self):void 0);return bt(s.output,e.context,r,n.self)}function In(e,t,n,s,i,r,o,c){let a=e;const h=new Set,f=new Set;kn(s,o,f,h),c&&f.add(e.machine.root);const u=new Set;for(const d of[...h].sort((l,p)=>l.order-p.order)){i.add(d);const l=[];l.push(...d.entry);for(const p of d.invoke)l.push(ln(p.src,{...p,syncSnapshot:!!p.onSnapshot}));if(f.has(d)){const p=d.initial.actions;l.push(...p)}if(a=J(a,t,n,l,r,d.invoke.map(p=>p.id)),d.type==="final"){const p=d.parent;let y=(p==null?void 0:p.type)==="parallel"?p:p==null?void 0:p.parent,_=y||d;for((p==null?void 0:p.type)==="compound"&&r.push(At(p.id,d.output!==void 0?bt(d.output,a.context,t,n.self):void 0));(y==null?void 0:y.type)==="parallel"&&!u.has(y)&&Ct(i,y);)u.add(y),r.push(At(y.id)),_=y,y=y.parent;if(y)continue;a=M(a,{status:"done",output:En(a,t,n,a.machine.root,_)})}}return a}function kn(e,t,n,s){for(const i of e){const r=xe(i,t);for(const c of i.target||[])!E(c)&&(i.source!==c||i.source!==r||i.reenter)&&(s.add(c),n.add(c)),P(c,t,n,s);const o=jt(i,t);for(const c of o){const a=F(c,r);(r==null?void 0:r.type)==="parallel"&&a.push(r),we(s,t,n,a,!i.source.parent&&i.reenter?void 0:r)}}}function P(e,t,n,s){var i;if(E(e))if(t[e.id]){const r=t[e.id];for(const o of r)s.add(o),P(o,t,n,s);for(const o of r)ft(o,e.parent,s,t,n)}else{const r=Ae(e);for(const o of r.target)s.add(o),r===((i=e.parent)==null?void 0:i.initial)&&n.add(e.parent),P(o,t,n,s);for(const o of r.target)ft(o,e.parent,s,t,n)}else if(e.type==="compound"){const[r]=e.initial.target;E(r)||(s.add(r),n.add(r)),P(r,t,n,s),ft(r,e,s,t,n)}else if(e.type==="parallel")for(const r of U(e).filter(o=>!E(o)))[...s].some(o=>S(o,r))||(E(r)||(s.add(r),n.add(r)),P(r,t,n,s))}function we(e,t,n,s,i){for(const r of s)if((!i||S(r,i))&&e.add(r),r.type==="parallel")for(const o of U(r).filter(c=>!E(c)))[...e].some(c=>S(c,o))||(e.add(o),P(o,t,n,e))}function ft(e,t,n,s,i){we(n,s,i,F(e,t))}function Mn(e,t,n,s,i,r,o,c){let a=e;const h=xt(s,i,r);h.sort((u,d)=>d.order-u.order);let f;for(const u of h)for(const d of Sn(u)){let l;d.history==="deep"?l=p=>Ot(p)&&S(p,u):l=p=>p.parent===u,f??(f={...r}),f[d.id]=Array.from(i).filter(l)}for(const u of h)a=J(a,t,n,[...u.exit,...u.invoke.map(d=>_e(d.id))],o,void 0),i.delete(u);return[a,f||r]}function On(e,t){return e.implementations.actions[t]}function Te(e,t,n,s,i,r){const{machine:o}=e;let c=e;for(const a of s){const h=typeof a=="function",f=h?a:On(o,typeof a=="string"?a:a.type),u={context:c.context,event:t,self:n.self,system:n.system},d=h||typeof a=="string"?void 0:"params"in a?typeof a.params=="function"?a.params({context:c.context,event:t}):a.params:void 0;if(!f||!("resolve"in f)){n.actionExecutor({type:typeof a=="string"?a:typeof a=="object"?a.type:a.name||"(anonymous)",info:u,params:d,exec:f});continue}const l=f,[p,y,_]=l.resolve(n,c,u,d,f,i);c=p,"retryResolve"in l&&(r==null||r.push([l,y])),"execute"in l&&n.actionExecutor({type:l.type,info:u,params:y,exec:l.execute.bind(null,n,y)}),_&&(c=Te(c,t,n,_,i,r))}return c}function J(e,t,n,s,i,r){const o=r?[]:void 0,c=Te(e,t,n,s,{internalQueue:i,deferredActorIds:r},o);return o==null||o.forEach(([a,h])=>{a.retryResolve(n,c,h)}),c}function pt(e,t,n,s){let i=e;const r=[];function o(h,f,u){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:f,snapshot:h,_transitions:u}),r.push(h)}if(t.type===rt)return i=M(Gt(i,t,n),{status:"stopped"}),o(i,t,[]),{snapshot:i,microstates:r};let c=t;if(c.type!==de){const h=c,f=en(h),u=Xt(h,i);if(f&&!u.length)return i=M(e,{status:"error",error:h.error}),o(i,h,[]),{snapshot:i,microstates:r};i=wt(u,e,n,c,!1,s),o(i,h,u)}let a=!0;for(;i.status==="active";){let h=a?Cn(i,c):[];const f=h.length?i:void 0;if(!h.length){if(!s.length)break;c=s.shift(),h=Xt(c,i)}i=wt(h,i,n,c,!1,s),a=i!==f,o(i,c,h)}return i.status!=="active"&&Gt(i,c,n),{snapshot:i,microstates:r}}function Gt(e,t,n){return J(e,t,n,Object.values(e.children).map(s=>_e(s)),[],void 0)}function Xt(e,t){return t.machine.getTransitionData(t,e)}function Cn(e,t){const n=new Set,s=e._nodes.filter(Ot);for(const i of s)t:for(const r of[i].concat(F(i,void 0)))if(r.always){for(const o of r.always)if(o.guard===void 0||Mt(o.guard,e.context,t,e)){n.add(o);break t}}return Se(Array.from(n),new Set(e._nodes),e.historyValue)}function Ln(e,t){const n=ot(at(e,t));return $e(e,[...n])}function jn(e){return!!e&&typeof e=="object"&&"machine"in e&&"value"in e}const Rn=function(t){return fe(t,this.value)},Bn=function(t){return this.tags.has(t)},Hn=function(t){const n=this.machine.getTransitionData(this,t);return!!(n!=null&&n.length)&&n.some(s=>s.target!==void 0||s.actions.length)},Dn=function(){const{_nodes:t,tags:n,machine:s,getMeta:i,toJSON:r,can:o,hasTag:c,matches:a,...h}=this;return{...h,tags:Array.from(n)}},Pn=function(){return this._nodes.reduce((t,n)=>(n.meta!==void 0&&(t[n.id]=n.meta),t),{})};function nt(e,t){return{status:e.status,output:e.output,error:e.error,machine:t,context:e.context,_nodes:e._nodes,value:$e(t.root,e._nodes),tags:new Set(e._nodes.flatMap(n=>n.tags)),children:e.children,historyValue:e.historyValue||{},matches:Rn,hasTag:Bn,can:Hn,getMeta:Pn,toJSON:Dn}}function M(e,t={}){return nt({...e,...t},e.machine)}function Un(e,t){const{_nodes:n,tags:s,machine:i,children:r,context:o,can:c,hasTag:a,matches:h,getMeta:f,toJSON:u,...d}=e,l={};for(const y in r){const _=r[y];l[y]={snapshot:_.getPersistedSnapshot(t),src:_.src,systemId:_._systemId,syncSnapshot:_._syncSnapshot}}return{...d,context:Ee(o),children:l}}function Ee(e){let t;for(const n in e){const s=e[n];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??(t=Array.isArray(e)?e.slice():{...e}),t[n]={xstate$$type:kt,id:s.id};else{const i=Ee(s);i!==s&&(t??(t=Array.isArray(e)?e.slice():{...e}),t[n]=i)}}return t??e}function Nn(e,t,n,s,{event:i,id:r,delay:o},{internalQueue:c}){const a=t.machine.implementations.delays;if(typeof i=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${i}" }) instead`);const h=typeof i=="function"?i(n,s):i;let f;if(typeof o=="string"){const u=a&&a[o];f=typeof u=="function"?u(n,s):u}else f=typeof o=="function"?o(n,s):o;return typeof f!="number"&&c.push(h),[t,{event:h,id:r,delay:f},void 0]}function Jn(e,t){const{event:n,delay:s,id:i}=t;if(typeof s=="number"){e.defer(()=>{const r=e.self;e.system.scheduler.schedule(r,r,n,s,i)});return}}function Wn(e,t){function n(s,i){}return n.type="xstate.raise",n.event=e,n.id=t==null?void 0:t.id,n.delay=t==null?void 0:t.delay,n.resolve=Nn,n.execute=Jn,n}const Yt="xstate.promise.resolve",Zt="xstate.promise.reject",tt=new WeakMap;function Ie(e){return{config:e,transition:(n,s,i)=>{var r;if(n.status!=="active")return n;switch(s.type){case Yt:{const o=s.data;return{...n,status:"done",output:o,input:void 0}}case Zt:return{...n,status:"error",error:s.data,input:void 0};case rt:return(r=tt.get(i.self))==null||r.abort(),{...n,status:"stopped",input:void 0};default:return n}},start:(n,{self:s,system:i,emit:r})=>{if(n.status!=="active")return;const o=new AbortController;tt.set(s,o),Promise.resolve(e({input:n.input,system:i,self:s,signal:o.signal,emit:r})).then(a=>{s.getSnapshot().status==="active"&&(tt.delete(s),i._relay(s,s,{type:Yt,data:a}))},a=>{s.getSnapshot().status==="active"&&(tt.delete(s),i._relay(s,s,{type:Zt,data:a}))})},getInitialSnapshot:(n,s)=>({status:"active",output:void 0,error:void 0,input:s}),getPersistedSnapshot:n=>n,restoreSnapshot:n=>n}}function zn(e,{machine:t,context:n},s,i){const r=(o,c={})=>{const{systemId:a,input:h}=c;if(typeof o=="string"){const f=It(t,o);if(!f)throw new Error(`Actor logic '${o}' not implemented in machine '${t.id}'`);const u=Y(f,{id:c.id,parent:e.self,syncSnapshot:c.syncSnapshot,input:typeof h=="function"?h({context:n,event:s,self:e.self}):h,src:o,systemId:a});return i[u.id]=u,u}else return Y(o,{id:c.id,parent:e.self,syncSnapshot:c.syncSnapshot,input:c.input,src:o,systemId:a})};return(o,c)=>{const a=r(o,c);return i[a.id]=a,e.defer(()=>{a._processingStatus!==m.Stopped&&a.start()}),a}}function qn(e,t,n,s,{assignment:i}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const r={},o={context:t.context,event:n.event,spawn:zn(e,t,n.event,r),self:e.self,system:e.system};let c={};if(typeof i=="function")c=i(o,s);else for(const h of Object.keys(i)){const f=i[h];c[h]=typeof f=="function"?f(o,s):f}const a=Object.assign({},t.context,c);return[M(t,{context:a,children:Object.keys(r).length?{...t.children,...r}:t.children}),void 0,void 0]}function ke(e){function t(n,s){}return t.type="xstate.assign",t.assignment=e,t.resolve=qn,t}let Kt=function(e){return e.Parent="#_parent",e.Internal="#_internal",e}({});function Gn(e,t,n,s,{to:i,event:r,id:o,delay:c},a){var p;const h=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${r}" }) instead`);const f=typeof r=="function"?r(n,s):r;let u;if(typeof c=="string"){const y=h&&h[c];u=typeof y=="function"?y(n,s):y}else u=typeof c=="function"?c(n,s):c;const d=typeof i=="function"?i(n,s):i;let l;if(typeof d=="string"){if(d===Kt.Parent?l=e.self._parent:d===Kt.Internal?l=e.self:d.startsWith("#_")?l=t.children[d.slice(2)]:l=(p=a.deferredActorIds)!=null&&p.includes(d)?d:t.children[d],!l)throw new Error(`Unable to send event to actor '${d}' from machine '${t.machine.id}'.`)}else l=d||e.self;return[t,{to:l,targetId:typeof d=="string"?d:void 0,event:f,id:o,delay:u},void 0]}function Xn(e,t,n){typeof n.to=="string"&&(n.to=t.children[n.to])}function Yn(e,t){e.defer(()=>{const{to:n,event:s,delay:i,id:r}=t;if(typeof i=="number"){e.system.scheduler.schedule(e.self,n,s,i,r);return}e.system._relay(e.self,n,s.type===Ke?he(e.self.id,s.data):s)})}function yt(e,t,n){function s(i,r){}return s.type="xstate.sendTo",s.to=e,s.event=t,s.id=n==null?void 0:n.id,s.delay=n==null?void 0:n.delay,s.resolve=Gn,s.retryResolve=Xn,s.execute=Yn,s}function Zn(e,t){const n=A(t);if(!n.includes(e.type)){const s=n.length===1?`type "${n[0]}"`:`one of types "${n.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(e)} to have ${s}`)}}const Vt=new WeakMap;function B(e,t,n){let s=Vt.get(e);return s?t in s||(s[t]=n()):(s={[t]:n()},Vt.set(e,s)),s[t]}const Kn={},z=e=>typeof e=="string"?{type:e}:typeof e=="function"?"resolve"in e?{type:e.type}:{type:e.name}:e;class Rt{constructor(t,n){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=n._parent,this.key=n._key,this.machine=n._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(ae),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?Jt(this.config.states,(s,i)=>new Rt(s,{_parent:this,_key:i,_machine:this.machine})):Kn,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=A(this.config.entry).slice(),this.exit=A(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=A(t.tags).slice()}_initialize(){this.transitions=_n(this),this.config.always&&(this.always=D(this.config.always).map(t=>T(this,ue,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(z),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(z),eventType:null})}:void 0,history:this.history,states:Jt(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(z)})),entry:this.entry.map(z),exit:this.exit.map(z),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return B(this,"invoke",()=>A(this.config.invoke).map((t,n)=>{const{src:s,systemId:i}=t,r=t.id??Wt(this.id,n),o=typeof s=="string"?s:`xstate.invoke.${Wt(this.id,n)}`;return{...t,src:o,id:r,systemId:i,toJSON(){const{onDone:c,onError:a,...h}=t;return{...h,type:"xstate.invoke",src:o,id:r}}}}))}get on(){return B(this,"on",()=>[...this.transitions].flatMap(([n,s])=>s.map(i=>[n,i])).reduce((n,[s,i])=>(n[s]=n[s]||[],n[s].push(i),n),{}))}get after(){return B(this,"delayedTransitions",()=>gn(this))}get initial(){return B(this,"initial",()=>mn(this,this.config.initial))}next(t,n){const s=n.type,i=[];let r;const o=B(this,`candidates-${s}`,()=>yn(this,s));for(const c of o){const{guard:a}=c,h=t.context;let f=!1;try{f=!a||Mt(a,h,n,t)}catch(u){const d=typeof a=="string"?a:typeof a=="object"?a.type:void 0;throw new Error(`Unable to evaluate guard ${d?`'${d}' `:""}in transition for event '${s}' in state node '${this.id}':
${u.message}`)}if(f){i.push(...c.actions),r=c;break}}return r?[r]:void 0}get events(){return B(this,"events",()=>{const{states:t}=this,n=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const i=t[s];if(i.states)for(const r of i.events)n.add(`${r}`)}return Array.from(n)})}get ownEvents(){const t=new Set([...this.transitions.keys()].filter(n=>this.transitions.get(n).some(s=>!(!s.target&&!s.actions.length&&!s.reenter))));return Array.from(t)}}const Vn="#";class Bt{constructor(t,n){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:(n==null?void 0:n.actors)??{},actions:(n==null?void 0:n.actions)??{},delays:(n==null?void 0:n.delays)??{},guards:(n==null?void 0:n.guards)??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new Rt(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:n,guards:s,actors:i,delays:r}=this.implementations;return new Bt(this.config,{actions:{...n,...t.actions},guards:{...s,...t.guards},actors:{...i,...t.actors},delays:{...r,...t.delays}})}resolveState(t){const n=Ln(this.root,t.value),s=ot(at(this.root,n));return nt({_nodes:[...s],context:t.context||{},children:{},status:Ct(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,n,s){return pt(t,n,s,[]).snapshot}microstep(t,n,s){return pt(t,n,s,[]).microstates}getTransitionData(t,n){return Lt(this.root,t.value,t,n)||[]}getPreInitialState(t,n,s){const{context:i}=this.config,r=nt({context:typeof i!="function"&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return typeof i=="function"?J(r,n,t,[ke(({spawn:c,event:a,self:h})=>i({spawn:c,input:a.input,self:h}))],s,void 0):r}getInitialSnapshot(t,n){const s=le(n),i=[],r=this.getPreInitialState(t,s,i),o=wt([{target:[...be(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],r,t,s,!0,i),{snapshot:c}=pt(o,s,t,i);return c}start(t){Object.values(t.children).forEach(n=>{n.getSnapshot().status==="active"&&n.start()})}getStateNodeById(t){const n=Et(t),s=n.slice(1),i=dt(n[0])?n[0].slice(Vn.length):n[0],r=this.idMap.get(i);if(!r)throw new Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return ct(r,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,n){return Un(t,n)}restoreSnapshot(t,n){const s={},i=t.children;Object.keys(i).forEach(a=>{const h=i[a],f=h.snapshot,u=h.src,d=typeof u=="string"?It(this,u):u;if(!d)return;const l=Y(d,{id:a,parent:n.self,syncSnapshot:h.syncSnapshot,snapshot:f,src:u,systemId:h.systemId});s[a]=l});const r=nt({...t,children:s,_nodes:Array.from(ot(at(this.root,t.value)))},this),o=new Set;function c(a,h){if(!o.has(a)){o.add(a);for(const f in a){const u=a[f];if(u&&typeof u=="object"){if("xstate$$type"in u&&u.xstate$$type===kt){a[f]=h[u.id];continue}c(u,h)}}}}return c(r.context,s),r}}function Fn(e,t){return new Bt(e,t)}function ht({schemas:e,actors:t,actions:n,guards:s,delays:i}){return{createMachine:r=>Fn({...r,schemas:e},{actors:t,actions:n,guards:s,delays:i})}}const Qn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ft(e,t,n){var r,o,c;const s=typeof e=="object",i=s?e:void 0;return{next:(r=s?e.next:e)==null?void 0:r.bind(i),error:(o=s?e.error:t)==null?void 0:o.bind(i),complete:(c=s?e.complete:n)==null?void 0:c.bind(i)}}function ts(e,t){return t(e)}const H=new WeakMap;function es(e,t,n){let s,i;const r={context:e,status:"active",output:void 0,error:void 0};let o=r;const c=u=>{if(!i)return;const d=u.type,l=i.get(d);l&&l.forEach(p=>p(u))},a=ss(t);function h(u){var l;let d;[o,d]=a(o,u),(l=H.get(f))==null||l.forEach(p=>{var y;(y=p.next)==null||y.call(p,{type:"@xstate.snapshot",event:u,snapshot:o,actorRef:f,rootId:f.sessionId})}),s==null||s.forEach(p=>{var y;return(y=p.next)==null?void 0:y.call(p,o)}),d.forEach(c)}const f={on(u,d){i||(i=new Map);let l=i.get(u);l||(l=new Set,i.set(u,l));const p=d.bind(void 0);return l.add(p),{unsubscribe(){l.delete(p)}}},sessionId:is(),send(u){var d;(d=H.get(f))==null||d.forEach(l=>{var p;(p=l.next)==null||p.call(l,{type:"@xstate.event",event:u,sourceRef:void 0,actorRef:f,rootId:f.sessionId})}),h(u)},getSnapshot(){return o},getInitialSnapshot(){return r},subscribe(u){const d=Ft(u);return s??(s=new Set),s.add(d),{unsubscribe(){return s==null?void 0:s.delete(d)}}},[Qn](){return this},inspect:u=>{var l,p;const d=Ft(u);return H.set(f,H.get(f)??new Set),H.get(f).add(d),(l=d.next)==null||l.call(d,{type:"@xstate.actor",actorRef:f,rootId:f.sessionId}),(p=d.next)==null||p.call(d,{type:"@xstate.snapshot",snapshot:r,event:{type:"@xstate.init"},actorRef:f,rootId:f.sessionId}),{unsubscribe(){var y;return(y=H.get(f))==null?void 0:y.delete(d)}}}};return f}function ns(e,t){return es(e.context,e.on)}function ss(e,t){return(n,s)=>{let i=n.context;const r=e==null?void 0:e[s.type],o=[],c={emit:a=>{o.push(a)}};if(!r)return[n,o];if(typeof r=="function")i=ts(i,a=>Object.assign({},i,r==null?void 0:r(a,s,c)));else{const a={};for(const h of Object.keys(r)){const f=r[h];a[h]=typeof f=="function"?f(i,s,c):f}i=Object.assign({},i,a)}return[{...n,context:i},o]}}function is(){return Math.random().toString(36).slice(6)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const X=globalThis,ut=X.trustedTypes,Qt=ut?ut.createPolicy("lit-html",{createHTML:e=>e}):void 0,Ht="$lit$",$=`lit$${Math.random().toFixed(9).slice(2)}$`,Dt="?"+$,rs=`<${Dt}>`,O=document,Z=()=>O.createComment(""),K=e=>e===null||typeof e!="object"&&typeof e!="function",Pt=Array.isArray,Me=e=>Pt(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",gt=`[ 	
\f\r]`,q=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,te=/-->/g,ee=/>/g,x=RegExp(`>|${gt}(?:([^\\s"'>=/]+)(${gt}*=${gt}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ne=/'/g,se=/"/g,Oe=/^(?:script|style|textarea|title)$/i,os=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),b=os(1),C=Symbol.for("lit-noChange"),g=Symbol.for("lit-nothing"),ie=new WeakMap,I=O.createTreeWalker(O,129);function Ce(e,t){if(!Pt(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return Qt!==void 0?Qt.createHTML(t):t}const Le=(e,t)=>{const n=e.length-1,s=[];let i,r=t===2?"<svg>":t===3?"<math>":"",o=q;for(let c=0;c<n;c++){const a=e[c];let h,f,u=-1,d=0;for(;d<a.length&&(o.lastIndex=d,f=o.exec(a),f!==null);)d=o.lastIndex,o===q?f[1]==="!--"?o=te:f[1]!==void 0?o=ee:f[2]!==void 0?(Oe.test(f[2])&&(i=RegExp("</"+f[2],"g")),o=x):f[3]!==void 0&&(o=x):o===x?f[0]===">"?(o=i??q,u=-1):f[1]===void 0?u=-2:(u=o.lastIndex-f[2].length,h=f[1],o=f[3]===void 0?x:f[3]==='"'?se:ne):o===se||o===ne?o=x:o===te||o===ee?o=q:(o=x,i=void 0);const l=o===x&&e[c+1].startsWith("/>")?" ":"";r+=o===q?a+rs:u>=0?(s.push(h),a.slice(0,u)+Ht+a.slice(u)+$+l):a+$+(u===-2?c:l)}return[Ce(e,r+(e[n]||"<?>")+(t===2?"</svg>":t===3?"</math>":"")),s]};class V{constructor({strings:t,_$litType$:n},s){let i;this.parts=[];let r=0,o=0;const c=t.length-1,a=this.parts,[h,f]=Le(t,n);if(this.el=V.createElement(h,s),I.currentNode=this.el.content,n===2||n===3){const u=this.el.content.firstChild;u.replaceWith(...u.childNodes)}for(;(i=I.nextNode())!==null&&a.length<c;){if(i.nodeType===1){if(i.hasAttributes())for(const u of i.getAttributeNames())if(u.endsWith(Ht)){const d=f[o++],l=i.getAttribute(u).split($),p=/([.?@])?(.*)/.exec(d);a.push({type:1,index:r,name:p[2],strings:l,ctor:p[1]==="."?Re:p[1]==="?"?Be:p[1]==="@"?He:Q}),i.removeAttribute(u)}else u.startsWith($)&&(a.push({type:6,index:r}),i.removeAttribute(u));if(Oe.test(i.tagName)){const u=i.textContent.split($),d=u.length-1;if(d>0){i.textContent=ut?ut.emptyScript:"";for(let l=0;l<d;l++)i.append(u[l],Z()),I.nextNode(),a.push({type:2,index:++r});i.append(u[d],Z())}}}else if(i.nodeType===8)if(i.data===Dt)a.push({type:2,index:r});else{let u=-1;for(;(u=i.data.indexOf($,u+1))!==-1;)a.push({type:7,index:r}),u+=$.length-1}r++}}static createElement(t,n){const s=O.createElement("template");return s.innerHTML=t,s}}function L(e,t,n=e,s){var o,c;if(t===C)return t;let i=s!==void 0?(o=n._$Co)==null?void 0:o[s]:n._$Cl;const r=K(t)?void 0:t._$litDirective$;return(i==null?void 0:i.constructor)!==r&&((c=i==null?void 0:i._$AO)==null||c.call(i,!1),r===void 0?i=void 0:(i=new r(e),i._$AT(e,n,s)),s!==void 0?(n._$Co??(n._$Co=[]))[s]=i:n._$Cl=i),i!==void 0&&(t=L(e,i._$AS(e,t.values),i,s)),t}let je=class{constructor(t,n){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:n},parts:s}=this._$AD,i=((t==null?void 0:t.creationScope)??O).importNode(n,!0);I.currentNode=i;let r=I.nextNode(),o=0,c=0,a=s[0];for(;a!==void 0;){if(o===a.index){let h;a.type===2?h=new W(r,r.nextSibling,this,t):a.type===1?h=new a.ctor(r,a.name,a.strings,this,t):a.type===6&&(h=new De(r,this,t)),this._$AV.push(h),a=s[++c]}o!==(a==null?void 0:a.index)&&(r=I.nextNode(),o++)}return I.currentNode=O,i}p(t){let n=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(t,s,n),n+=s.strings.length-2):s._$AI(t[n])),n++}};class W{get _$AU(){var t;return((t=this._$AM)==null?void 0:t._$AU)??this._$Cv}constructor(t,n,s,i){this.type=2,this._$AH=g,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=s,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(t==null?void 0:t.nodeType)===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=L(this,t,n),K(t)?t===g||t==null||t===""?(this._$AH!==g&&this._$AR(),this._$AH=g):t!==this._$AH&&t!==C&&this._(t):t._$litType$!==void 0?this.$(t):t.nodeType!==void 0?this.T(t):Me(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==g&&K(this._$AH)?this._$AA.nextSibling.data=t:this.T(O.createTextNode(t)),this._$AH=t}$(t){var r;const{values:n,_$litType$:s}=t,i=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=V.createElement(Ce(s.h,s.h[0]),this.options)),s);if(((r=this._$AH)==null?void 0:r._$AD)===i)this._$AH.p(n);else{const o=new je(i,this),c=o.u(this.options);o.p(n),this.T(c),this._$AH=o}}_$AC(t){let n=ie.get(t.strings);return n===void 0&&ie.set(t.strings,n=new V(t)),n}k(t){Pt(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let s,i=0;for(const r of t)i===n.length?n.push(s=new W(this.O(Z()),this.O(Z()),this,this.options)):s=n[i],s._$AI(r),i++;i<n.length&&(this._$AR(s&&s._$AB.nextSibling,i),n.length=i)}_$AR(t=this._$AA.nextSibling,n){var s;for((s=this._$AP)==null?void 0:s.call(this,!1,!0,n);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){var n;this._$AM===void 0&&(this._$Cv=t,(n=this._$AP)==null||n.call(this,t))}}class Q{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,n,s,i,r){this.type=1,this._$AH=g,this._$AN=void 0,this.element=t,this.name=n,this._$AM=i,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=g}_$AI(t,n=this,s,i){const r=this.strings;let o=!1;if(r===void 0)t=L(this,t,n,0),o=!K(t)||t!==this._$AH&&t!==C,o&&(this._$AH=t);else{const c=t;let a,h;for(t=r[0],a=0;a<r.length-1;a++)h=L(this,c[s+a],n,a),h===C&&(h=this._$AH[a]),o||(o=!K(h)||h!==this._$AH[a]),h===g?t=g:t!==g&&(t+=(h??"")+r[a+1]),this._$AH[a]=h}o&&!i&&this.j(t)}j(t){t===g?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Re extends Q{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===g?void 0:t}}class Be extends Q{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==g)}}class He extends Q{constructor(t,n,s,i,r){super(t,n,s,i,r),this.type=5}_$AI(t,n=this){if((t=L(this,t,n,0)??g)===C)return;const s=this._$AH,i=t===g&&s!==g||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,r=t!==g&&(s===g||i);i&&this.element.removeEventListener(this.name,this,s),r&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,t):this._$AH.handleEvent(t)}}class De{constructor(t,n,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){L(this,t)}}const cs={M:Ht,P:$,A:Dt,C:1,L:Le,R:je,D:Me,V:L,I:W,H:Q,N:Be,U:He,B:Re,F:De},_t=X.litHtmlPolyfillSupport;_t==null||_t(V,W),(X.litHtmlVersions??(X.litHtmlVersions=[])).push("3.2.1");const k=(e,t,n)=>{const s=(n==null?void 0:n.renderBefore)??t;let i=s._$litPart$;if(i===void 0){const r=(n==null?void 0:n.renderBefore)??null;s._$litPart$=i=new W(t.insertBefore(Z(),r),r,void 0,n??{})}return i._$AI(e),i},st="tab__route",mt=e=>t=>(e(t),t),it=ns({context:{count:0},on:{ability:mt(e=>k(us(e),document.getElementById(st))),tool:mt(e=>k(ds(e),document.getElementById(st))),hobby:mt(e=>k(hs(e),document.getElementById(st)))}}),as=()=>b`
<section class="card card-side bg-base-100 shadow-xl">
    <figure class="w-24 rounded-sm">
        <img src="/img/avatar_20241130.png" alt="my_avatar">
    </figure>
    <aside class="
    card-body max-w-fit
    hover:*:cursor-pointer *:transition">
        <span
            @click=${()=>it.send({type:"ability"})} data-target="ability"  data-value="ability-tab"
            class="iconify jam--sword-f text-red-200 hover:bg-red-400" ></span>
        <span
            @click=${()=>it.send({type:"tool"})} 
            class="iconify jam--shield-f text-gray-400 hover:bg-gray-600"></span>
        <span
            @click=${()=>it.send({type:"hobby"})}
            class="iconify jam--heart-f text-green-200 hover:bg-green-400"></span>
    </aside>
    <aside id="${st}" class="card-body">
        <p>Introduction</p>
    </aside>
</section>
`,us=({count:e})=>b`
<p>My Abilities ${e}</p>
`,ds=({count:e})=>b`
<p>My Tools ${e}</p>
`,hs=({count:e})=>b`
<p>My Hobbies ${e}</p>
`;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Pe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Ue=e=>(...t)=>({_$litDirective$:e,values:t});class Ne{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,s){this._$Ct=t,this._$AM=n,this._$Ci=s}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{I:ls}=cs,re=()=>document.createComment(""),G=(e,t,n)=>{var r;const s=e._$AA.parentNode,i=t===void 0?e._$AB:t._$AA;if(n===void 0){const o=s.insertBefore(re(),i),c=s.insertBefore(re(),i);n=new ls(o,c,e,e.options)}else{const o=n._$AB.nextSibling,c=n._$AM,a=c!==e;if(a){let h;(r=n._$AQ)==null||r.call(n,e),n._$AM=e,n._$AP!==void 0&&(h=e._$AU)!==c._$AU&&n._$AP(h)}if(o!==i||a){let h=n._$AA;for(;h!==o;){const f=h.nextSibling;s.insertBefore(h,i),h=f}}}return n},w=(e,t,n=e)=>(e._$AI(t,n),e),fs={},ps=(e,t=fs)=>e._$AH=t,ys=e=>e._$AH,vt=e=>{var s;(s=e._$AP)==null||s.call(e,!1,!0);let t=e._$AA;const n=e._$AB.nextSibling;for(;t!==n;){const i=t.nextSibling;t.remove(),t=i}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const oe=(e,t,n)=>{const s=new Map;for(let i=t;i<=n;i++)s.set(e[i],i);return s},gs=Ue(class extends Ne{constructor(e){if(super(e),e.type!==Pe.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,n){let s;n===void 0?n=t:t!==void 0&&(s=t);const i=[],r=[];let o=0;for(const c of e)i[o]=s?s(c,o):o,r[o]=n(c,o),o++;return{values:r,keys:i}}render(e,t,n){return this.dt(e,t,n).values}update(e,[t,n,s]){const i=ys(e),{values:r,keys:o}=this.dt(t,n,s);if(!Array.isArray(i))return this.ut=o,r;const c=this.ut??(this.ut=[]),a=[];let h,f,u=0,d=i.length-1,l=0,p=r.length-1;for(;u<=d&&l<=p;)if(i[u]===null)u++;else if(i[d]===null)d--;else if(c[u]===o[l])a[l]=w(i[u],r[l]),u++,l++;else if(c[d]===o[p])a[p]=w(i[d],r[p]),d--,p--;else if(c[u]===o[p])a[p]=w(i[u],r[p]),G(e,a[p+1],i[u]),u++,p--;else if(c[d]===o[l])a[l]=w(i[d],r[l]),G(e,i[u],i[d]),d--,l++;else if(h===void 0&&(h=oe(o,l,p),f=oe(c,u,d)),h.has(c[u]))if(h.has(c[d])){const y=f.get(o[l]),_=y!==void 0?i[y]:null;if(_===null){const j=G(e,i[u]);w(j,r[l]),a[l]=j}else a[l]=w(_,r[l]),G(e,i[u],_),i[y]=null;l++}else vt(i[d]),d--;else vt(i[u]),u++;for(;l<=p;){const y=G(e,a[p+1]);w(y,r[l]),a[l++]=y}for(;u<=d;){const y=i[u++];y!==null&&vt(y)}return this.ut=o,ps(e,a),C}});function Je(e,t){let n=0;return b`${gs(e,s=>(s==null?void 0:s.id)??n++,(s,i)=>t(s))}`}const et={},$t={},_s="https://taminhtienhai.github.io/page",ms="https://taminhtienhai.github.io/json";async function vs({input:{name:e}}){if(et[e])return et[e];const t=`${_s}/${e}.html`;return fetch(t).then(n=>n.text()).then(n=>(et[e]=n,et[e])).catch(n=>`<p class="error">An error occur during fetching template: ${n}</p>`)}async function $s({input:{name:e}}){if($t[e])return $t[e];const t=`${ms}/${e}.json`;return fetch(t).then(n=>n.text()).then(n=>($t[e]=n,n)).catch(n=>`An error occur during fetching static json: ${n}`)}function As(e){return JSON.parse(e)}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class Tt extends Ne{constructor(t){if(super(t),this.it=g,t.type!==Pe.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===g||t==null)return this._t=void 0,this.it=t;if(t===C)return t;if(typeof t!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const n=[t];return n.raw=n,this._t={_$litType$:this.constructor.resultType,strings:n,values:[]}}}Tt.directiveName="unsafeHTML",Tt.resultType=1;const bs=Ue(Tt),Ss=e=>b`
<section 
    class="
    blog-post-item
    card card-compact bg-base-300 shadow-xl
    m-5 rounded-xl px-2 py-1 cursor-pointer
    "
>
    <small class="hover:text-fuchsia-300 transition">2023-01-07</small>
    <h3 class="card-title title mt-1">${e==null?void 0:e.title}</h3>
    <h5 class="text-sm my-2">${e==null?void 0:e.sub_title}</h5>
    <span>
    ${Je((e==null?void 0:e.tags)??[],t=>b`<i class="badge badge-outline text-xs">#${t}</i>`)}
    </span>
</section>
`,xs=e=>b`
<section class="pl-10%">
    <h1>Welcome everyone that come to my blog</h1>
    <br>
    <p>If you are interesting on <small class="">#java</small>, <small>#javascript</small> and specially <span class="iconify mdi--language-rust"></span> <small>#rust</small>. This is the right place.</p>
</section>
<section>
    ${Je(e,Ss)}
</section>
`,ws=e=>b`
<main class="grid justify-center">
    <article class=
    "prose lg:prose-xl font-blog-content
    prose-headings:font-sans
    prose-img:cursor-zoom-in
    ">${bs(e)}</article>
</main>
`,Ts=ht({types:{context:{},events:{}},actions:{loadUI:({context:e},{template:t})=>{k(t,e.ui.root)}},actors:{loadListBlogs:Ie($s)}}).createMachine({initial:"idle",context:{ui:{root:document.getElementById("route"),items:[]},posts:[]},states:{setup:{invoke:{src:"loadListBlogs",input:{name:"blogs"},onDone:{actions:ke(({event:e})=>({posts:As(e.output)})),target:"render"}}},idle:{on:{render:{target:"render"},setup:{target:"setup"}}},render:{entry:[{type:"loadUI",params:({context:e})=>({template:xs(e.posts)})},({context:e,system:t})=>{e.ui.root.querySelectorAll(".blog-post-item").forEach((s,i)=>s.addEventListener("click",r=>{const o=e.posts[i].src;t.get("@post").send({type:"render",template:o})}));const n=((s,i)=>{let r=i;return o=>{r==null||r.classList.remove(s),r=o,o==null||o.classList.add(s)}})("activated",document.querySelector("nav > .activated"));document.querySelectorAll("nav > .btn").forEach(s=>s.addEventListener("click",i=>n(s)))}],always:"idle"}}}),Es=ht({types:{context:{},input:{},events:{}},actors:{loadTemplateAsync:Ie(vs)}}).createMachine({initial:"idle",context:({input:e})=>({ui:{body:document.body,route:document.getElementById("route")},template:e.template}),states:{idle:{on:{render:{target:"render"}}},render:{invoke:{src:"loadTemplateAsync",input:({event:e})=>(Zn(e,"render"),{name:e.template}),onDone:{actions:({context:e,event:t})=>k(ws(t.output),e.ui.route),target:"idle"}}}}}),Is=ht({types:{context:{},events:{}},actors:{}}).createMachine({initial:"idle",context:e=>({ui:{body:document.body,route:document.getElementById("route")}}),states:{idle:{on:{render:{target:"render"}}},render:{entry:[({context:e})=>k(as(),e.ui.route),()=>it.send({type:"ability"})],always:"idle"}}}),ks=ht({types:{context:{},events:{}},actions:{loadUI:({context:e},{template:t})=>{k(t,e.ui.route)}},actors:{blog_post_page:Ts,me_page:Is,post_detail:Es}}).createMachine({initial:"me_page",invoke:[{systemId:"@me",src:"me_page"},{systemId:"@blogpost",src:"blog_post_page"},{systemId:"@post",src:"post_detail",input:{template:"sample_blog"}}],entry:[({self:e})=>{var t,n,s,i;(t=document.querySelector(".landing-page"))==null||t.addEventListener("click",r=>e.send({type:"me_page"})),(n=document.querySelector(".blog"))==null||n.addEventListener("click",r=>e.send({type:"blog_post_page"})),(s=document.querySelector(".me"))==null||s.addEventListener("click",r=>e.send({type:"me_page"})),(i=document.querySelector(".detail"))==null||i.addEventListener("click",r=>e.send({type:"about_page"}))}],context:e=>({ui:{body:document.body,route:document.getElementById("route")}}),states:{idle:{on:{blog_post_page:"blog_post_page",me_page:"me_page",about_page:"about_page"}},me_page:{entry:yt(({system:e})=>e.get("@me"),{type:"render"}),always:"idle"},blog_post_page:{entry:yt(({system:e})=>e.get("@blogpost"),{type:"setup"}),always:"idle"},about_page:{entry:yt(({system:e})=>e.get("@post"),{type:"render",template:"sample_blog"}),always:"idle"}}}),Ms=Y(ks);Ms.start();var ce;(ce=document.getElementById("theme-switcher"))==null||ce.addEventListener("click",e=>{document.documentElement.classList.contains("light")?(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark")):(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"))});
